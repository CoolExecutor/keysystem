<script>
  const btn = document.getElementById('actionBtn');
  const title = document.getElementById('title');
  const params = new URLSearchParams(window.location.search);
  const step = params.get('step');

  if (!step) {
    // –°—Ç–∞—Ä—Ç ‚Äî —Å–±—Ä–æ—Å localStorage
    localStorage.removeItem('step1done');
    localStorage.removeItem('step2done');
    btn.onclick = () => {
      localStorage.setItem('step1done', 'true');
      window.location.href = 'https://linkvertise.com/YOUR-LINK-STEP1';
    };
  }

  if (step === '2') {
    if (localStorage.getItem('step1done') !== 'true') {
      title.textContent = 'üö´ –û—à–∏–±–∫–∞: –≤—ã –Ω–µ –ø—Ä–æ—à–ª–∏ —à–∞–≥ 1';
      btn.style.display = 'none';
    } else {
      title.textContent = '–®–∞–≥ 2: –ü–æ—á—Ç–∏ –≥–æ—Ç–æ–≤–æ';
      btn.textContent = '–ü–µ—Ä–µ–π—Ç–∏ –∫–æ –≤—Ç–æ—Ä–æ–º—É —à–∞–≥—É';
      btn.onclick = () => {
        localStorage.setItem('step2done', 'true');
        window.location.href = 'https://linkvertise.com/YOUR-LINK-STEP2';
      };
    }
  }

  if (step === 'final') {
    if (localStorage.getItem('step2done') !== 'true') {
      title.textContent = 'üö´ –û—à–∏–±–∫–∞: –≤—ã –Ω–µ –ø—Ä–æ—à–ª–∏ —à–∞–≥ 2';
      btn.style.display = 'none';
    } else {
      title.textContent = '–®–∞–≥ 3: –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–ª—é—á–∞...';
      btn.style.display = 'none';

      fetch('https://raw.githubusercontent.com/CoolExecutor/keysystem/main/keys')
        .then(res => res.text())
        .then(data => {
          const keys = data.trim().split('\n');
          const randomKey = keys[Math.floor(Math.random() * keys.length)];
          title.innerHTML = `‚úÖ –í–∞—à –∫–ª—é—á:<br><code>${randomKey}</code>`;
        })
        .catch(() => {
          title.textContent = '–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∫–ª—é—á–∞.';
        });
    }
  }
</script>
